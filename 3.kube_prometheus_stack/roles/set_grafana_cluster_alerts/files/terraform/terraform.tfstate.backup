{
  "version": 4,
  "terraform_version": "1.9.8",
  "serial": 4,
  "lineage": "21ca1327-6594-7cff-af58-4f62f506e051",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "grafana_contact_point",
      "name": "contact_point_670f28d46e226feb",
      "provider": "provider[\"registry.terraform.io/grafana/grafana\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alertmanager": [],
            "dingding": [],
            "disable_provenance": false,
            "discord": [],
            "email": [],
            "googlechat": [],
            "id": "1:IT Iglesia Unida",
            "kafka": [],
            "line": [],
            "name": "IT Iglesia Unida",
            "oncall": [],
            "opsgenie": [],
            "org_id": "1",
            "pagerduty": [],
            "pushover": [],
            "sensugo": [],
            "slack": [],
            "sns": [],
            "teams": [],
            "telegram": [
              {
                "chat_id": "-1002491195370",
                "disable_notifications": false,
                "disable_resolve_message": false,
                "disable_web_page_preview": false,
                "message": "{{ template \"basic\" . }}",
                "message_thread_id": "",
                "parse_mode": "",
                "protect_content": false,
                "settings": {},
                "token": "7644053062:AAFBd4nzUr5s_wiUKksD7AMzZA4wKNWAYV8",
                "uid": "fe0vv88tujx1ca"
              }
            ],
            "threema": [],
            "victorops": [],
            "webex": [],
            "webhook": [],
            "wecom": []
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "telegram"
              }
            ]
          ],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "grafana_folder",
      "name": "alert_folder",
      "provider": "provider[\"registry.terraform.io/grafana/grafana\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1:de0vv88g6lwxsf",
            "org_id": "1",
            "parent_folder_uid": "",
            "prevent_destroy_if_not_empty": false,
            "title": "Cluster Monitoring Alerts",
            "uid": "de0vv88g6lwxsf",
            "url": "http://localhost:18276/dashboards/f/de0vv88g6lwxsf/cluster-monitoring-alerts"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "grafana_message_template",
      "name": "basic_template",
      "provider": "provider[\"registry.terraform.io/grafana/grafana\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "disable_provenance": false,
            "id": "1:basic",
            "name": "basic",
            "org_id": "1",
            "template": "{{ define \"basic\" }}\n  {{ range .Alerts }}\n    {{- if eq .Status \"firing\" }}\n      ðŸš¨ Firing\n{{ .Annotations.summary }}\nStart Time: {{ .StartsAt.Format \"15:04 UTC\" }}\n    {{ else if eq .Status \"resolved\" }}\n      âœ… Resolved\n{{ .Annotations.summary }}\nResolved Time: {{ .EndsAt.Format \"15:04 UTC\" }}\n    {{ end }}\n  {{ end }}\n{{ end }}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "grafana_rule_group",
      "name": "rule_group_a94442e6972097f5",
      "provider": "provider[\"registry.terraform.io/grafana/grafana\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "disable_provenance": false,
            "folder_uid": "de0vv88g6lwxsf",
            "id": "1:de0vv88g6lwxsf:Cluster",
            "interval_seconds": 60,
            "name": "Cluster",
            "org_id": "1",
            "rule": [
              {
                "annotations": {
                  "summary": "RAM usage is above 70% on cluster"
                },
                "condition": "C",
                "data": [
                  {
                    "datasource_uid": "prometheus",
                    "model": "{\"editorMode\":\"code\",\"expr\":\"100 * (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes))\",\"instant\":true,\"legendFormat\":\"__auto\",\"range\":false,\"refId\":\"A\"}",
                    "query_type": "",
                    "ref_id": "A",
                    "relative_time_range": [
                      {
                        "from": 600,
                        "to": 0
                      }
                    ]
                  },
                  {
                    "datasource_uid": "__expr__",
                    "model": "{\"conditions\":[{\"evaluator\":{\"params\":[70],\"type\":\"gt\"},\"operator\":{\"type\":\"and\"},\"query\":{\"params\":[\"C\"]},\"reducer\":{\"params\":[],\"type\":\"last\"},\"type\":\"query\"}],\"datasource\":{\"type\":\"__expr__\",\"uid\":\"__expr__\"},\"expression\":\"A\",\"refId\":\"C\",\"type\":\"threshold\"}",
                    "query_type": "",
                    "ref_id": "C",
                    "relative_time_range": [
                      {
                        "from": 600,
                        "to": 0
                      }
                    ]
                  }
                ],
                "exec_err_state": "Error",
                "for": "1m0s",
                "is_paused": false,
                "labels": null,
                "name": "Cluster RAM",
                "no_data_state": "NoData",
                "notification_settings": [
                  {
                    "contact_point": "IT Iglesia Unida",
                    "group_by": null,
                    "group_interval": "",
                    "group_wait": "",
                    "mute_timings": null,
                    "repeat_interval": ""
                  }
                ],
                "uid": "de0vv88zvt340d"
              },
              {
                "annotations": {
                  "summary": "CPU usage is above 70% on cluster"
                },
                "condition": "C",
                "data": [
                  {
                    "datasource_uid": "prometheus",
                    "model": "{\"editorMode\":\"code\",\"expr\":\"100 * (1 - avg by (instance) (rate(node_cpu_seconds_total{mode=\\\"idle\\\"}[5m])))\",\"instant\":true,\"legendFormat\":\"__auto\",\"range\":false,\"refId\":\"A\"}",
                    "query_type": "",
                    "ref_id": "A",
                    "relative_time_range": [
                      {
                        "from": 600,
                        "to": 0
                      }
                    ]
                  },
                  {
                    "datasource_uid": "__expr__",
                    "model": "{\"conditions\":[{\"evaluator\":{\"params\":[70],\"type\":\"gt\"},\"operator\":{\"type\":\"and\"},\"query\":{\"params\":[\"C\"]},\"reducer\":{\"params\":[],\"type\":\"last\"},\"type\":\"query\"}],\"datasource\":{\"type\":\"__expr__\",\"uid\":\"__expr__\"},\"expression\":\"A\",\"refId\":\"C\",\"type\":\"threshold\"}",
                    "query_type": "",
                    "ref_id": "C",
                    "relative_time_range": [
                      {
                        "from": 600,
                        "to": 0
                      }
                    ]
                  }
                ],
                "exec_err_state": "Error",
                "for": "30s",
                "is_paused": false,
                "labels": null,
                "name": "Cluster CPU",
                "no_data_state": "NoData",
                "notification_settings": [
                  {
                    "contact_point": "IT Iglesia Unida",
                    "group_by": null,
                    "group_interval": "",
                    "group_wait": "",
                    "mute_timings": null,
                    "repeat_interval": ""
                  }
                ],
                "uid": "ce0vv8900svswb"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "grafana_folder.alert_folder"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
